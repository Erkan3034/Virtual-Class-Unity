# Virtual Classroom - System Architecture

## System Flow Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         VIRTUAL CLASSROOM SYSTEM                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚             â”‚         â”‚                             â”‚         â”‚             â”‚
â”‚  ğŸ® UNITY   â”‚â—„â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚      âš™ï¸ BACKEND            â”‚â—„â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚  ğŸŒ WEB     â”‚
â”‚             â”‚         â”‚      (FastAPI)              â”‚         â”‚  (React)    â”‚
â”‚             â”‚ WS:8000 â”‚                             â”‚ WS:8000 â”‚             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                       â”‚
                                       â–¼
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚      PROCESSING PIPELINE     â”‚
                        â”‚                              â”‚
                        â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
                        â”‚  â”‚  NLP   â”‚â”€â”€â”€â–ºâ”‚ Knowledgeâ”‚  â”‚
                        â”‚  â”‚Analyzerâ”‚    â”‚   Base   â”‚  â”‚
                        â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
                        â”‚       â”‚                      â”‚
                        â”‚       â–¼                      â”‚
                        â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
                        â”‚  â”‚ Unknown Question?   â”‚     â”‚
                        â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
                        â”‚             â”‚ YES            â”‚
                        â”‚             â–¼                â”‚
                        â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
                        â”‚  â”‚   ğŸ¤– GROQ AI (LLM)   â”‚    â”‚
                        â”‚  â”‚   llama-3.1-8b       â”‚    â”‚
                        â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
                        â”‚             â”‚                â”‚
                        â”‚             â–¼                â”‚
                        â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
                        â”‚  â”‚   AI Response        â”‚    â”‚
                        â”‚  â”‚   - animation        â”‚    â”‚
                        â”‚  â”‚   - reply_text       â”‚    â”‚
                        â”‚  â”‚   - emotion          â”‚    â”‚
                        â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                       â”‚
                                       â–¼
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚  ğŸ“¡ BROADCAST TO CLIENTS     â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                       â”‚
                       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                       â–¼                               â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚  ğŸ® Unity 3D    â”‚             â”‚  ğŸŒ Web Panel   â”‚
              â”‚  - Animasyon    â”‚             â”‚  - Dashboard    â”‚
              â”‚  - KonuÅŸma      â”‚             â”‚  - Debug Trace  â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Data Flow

```
[1] Teacher/Student Input
         â”‚
         â–¼
[2] WebSocket / REST API â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Backend (localhost:8000)
         â”‚
         â–¼
[3] NLP Analyzer â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Intent Detection (praise, warn, question...)
         â”‚
         â–¼
[4] Knowledge Base â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º TÃ¼rkÃ§e YanÄ±t ÅablonlarÄ±
         â”‚
         â–¼
[5] Groq AI (if unknown) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º LLM ile AkÄ±llÄ± YanÄ±t
         â”‚
         â–¼
[6] Response Builder â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º JSON Response
         â”‚
         â–¼
[7] WebSocket Broadcast â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º TÃ¼m BaÄŸlÄ± Client'lar
         â”‚
         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â–¼                  â–¼
    Unity 3D            Web Dashboard
    - Animasyon         - Real-time trace
    - Speech Bubble     - State display
```

---

## Request Format

```json
{
  "source": "unity | web",
  "teacher_id": "teacher_001",
  "student_id": "student_001", 
  "teacher_action": "praise | warn | encourage | question | command_sit | command_stand",
  "content": "Serbest metin (opsiyonel)"
}
```

## Response Format

```json
{
  "animation": "happy | alert | thinking | sit | stand | ...",
  "reply_text": "TeÅŸekkÃ¼rler Ã¶ÄŸretmenim!",
  "emotion": "happy | sad | confused | motivated | ...",
  "confidence": 1.0,
  "student_state": "attentive | distracted | sleepy | ..."
}
```

---

## Components

| Katman | Dosya | AÃ§Ä±klama |
|--------|-------|----------|
| **Backend** | `main.py` | FastAPI entry point |
| | `ai/pipeline.py` | Ana iÅŸleme mantÄ±ÄŸÄ± |
| | `ai/groq_client.py` | LLM entegrasyonu |
| | `nlp/knowledge_base.py` | TÃ¼rkÃ§e yanÄ±tlar |
| | `ws/manager.py` | WebSocket yÃ¶netimi |
| **Frontend** | `TeacherPanel/` | Ã–ÄŸretmen kontrolleri |
| | `DebugDashboard/` | Real-time trace |
| **Unity** | `VirtualClassClient.cs` | WebSocket client |
| | `StudentAgentController.cs` | Karakter kontrolÃ¼ |

---

## Endpoints

| URL | Method | AÃ§Ä±klama |
|-----|--------|----------|
| `ws://localhost:8000/ws/v1/classroom/{room}` | WebSocket | Real-time |
| `http://localhost:8000/api/v1/teacher/input` | POST | REST API |
| `http://localhost:5174/teacher` | - | Teacher Panel |
| `http://localhost:5174/debug` | - | Debug Dashboard |